<!DOCTYPE html>
<html>
<head>
  <meta charset='UTF-8'/>
  <meta content='width=device-width, initial-scale=1, user-scalable=1, minimum-scale=1, maximum-scale=5' name='viewport'/>
  <meta content='IE=edge' http-equiv='X-UA-Compatible'/>
  
  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.all.min.js"></script>
  <script src="https://unpkg.com/typeit@8.7.0/dist/typeit.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;600&family=Pacifico&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/4f3ce16e3e.js" crossorigin="anonymous"></script>

  <title>Special Message For My Love</title>
  <meta name="description" content="A heartfelt message created with love">
  
  <style>
    :root {
      --primary-color: #ff6b8b;
      --secondary-color: #ff8e53;
      --accent-color: #ffb8c6;
      --bg-color: #3a0c3a;
      --text-color: #fff5f7;
    }
    
    body {
      font-family: 'Montserrat', sans-serif;
      color: var(--text-color);
      overflow-x: hidden;
      margin: 0;
      padding: 0;
      background-image: url(IMG_20250727_192909.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      touch-action: manipulation;
    }
    
    /* Starry background animation */
    #starryBackground {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -2;
  pointer-events: none;

  background-image: url('IMG_20250727_192909.png'); /* ‚Üê pakai gambar 1024x1536 kamu */
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;

  animation: zoomBackground 25s ease-in-out infinite;
    }
    
    .star {
      position: absolute;
      background-color: white;
      border-radius: 50%;
      animation: twinkle 3s infinite ease-in-out;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
      pointer-events: none;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0.2; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1.2); box-shadow: 0 0 20px white; }
    }
    
    /* Floating hearts animation */
    .floating-hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    
    .floating-heart {
      position: absolute;
      font-size: 20px;
      color: var(--accent-color);
      animation: float 15s linear infinite;
      opacity: 0;
    }
    
    @keyframes float {
      0% { transform: translateY(100vh) scale(0.5); opacity: 0; }
      10% { opacity: 0.7; }
      90% { opacity: 0.7; }
      100% { transform: translateY(-20vh) scale(1.2); opacity: 0; }
    }
    
    /* Loading screen */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-color);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 999;
      transition: opacity 1s ease;
    }
    
    .heart-loader {
      width: 50px;
      height: 50px;
      background-color: var(--primary-color);
      position: relative;
      transform: rotate(45deg);
      animation: pulse 1.5s infinite;
      margin-bottom: 20px;
    }
    
    .heart-loader:before,
    .heart-loader:after {
      content: '';
      width: 50px;
      height: 50px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
    }
    
    .heart-loader:before {
      top: -25px;
      left: 0;
    }
    
    .heart-loader:after {
      top: 0;
      left: -25px;
    }
    
    @keyframes pulse {
      0% { transform: rotate(45deg) scale(1); }
      50% { transform: rotate(45deg) scale(1.2); }
      100% { transform: rotate(45deg) scale(1); }
    }
    
    .loading-text {
      font-size: 1.2rem;
      color: var(--accent-color);
      font-family: 'Dancing Script', cursive;
      animation: fadeInOut 2s infinite;
    }
    
    @keyframes fadeInOut {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
    
    /* Main content */
    #Content {
      max-width: 800px;
      margin: 0 auto;
      padding: 30px 20px;
      opacity: 0;
      transform: translateY(20px);
      transition: all 1s ease;
    }
    
    .content-loaded {
      opacity: 1 !important;
      transform: translateY(0) !important;
    }
    
    /* Message header */
    .message-header {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
    }
    
    .message-header h1 {
      font-family: 'Pacifico', cursive;
      font-size: 2.8rem;
      color: var(--primary-color);
      margin-bottom: 10px;
      text-shadow: 0 2px 10px rgba(255, 107, 139, 0.3);
      animation: glow 2s infinite alternate;
    }
    
    @keyframes glow {
      from { text-shadow: 0 0 5px rgba(255, 107, 139, 0.3); }
      to { text-shadow: 0 0 20px rgba(255, 107, 139, 0.7); }
    }
    
    .pulse {
      display: inline-block;
      animation: heartbeat 1.5s infinite;
    }
    
    @keyframes heartbeat {
      0% { transform: scale(1); }
      25% { transform: scale(1.1); }
      50% { transform: scale(1); }
      75% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    /* Message container with horizontal scroll */
    .message-container {
      width: 100%;
      overflow: hidden;
      position: relative;
      height: 400px;
      margin-bottom: 20px;
      border-radius: 15px;
      background: rgba(255, 255, 255, 0.05);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    .message-scroll {
      display: flex;
      transition: transform 0.5s ease;
      height: 100%;
      width: 100%;
    }
    
    /* Message cards */
    .message-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 20px;
      margin-right: 20px;
      min-width: calc(100% - 20px);
      height: calc(100% - 40px);
      position: relative;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      border-left: 4px solid var(--primary-color);
        display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start; /* supaya kontennya dari atas ke bawah */
  padding-top: 30px; /* kasih jarak dari atas */
  padding-bottom: 20px;
  text-align: center;
}
    
    .message-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%);
      z-index: 1;
    }
    
   .sticker-container {
  position: relative !important;
  width: 90px !important; /* atur ukuran stikernya di sini */
  height: 90px !important; 
  margin-bottom: 9px; /* jarak antara stiker dan teks */
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid var(--accent-color);
  background: white;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: floatSticker 3s ease-in-out infinite;
}

    
    @keyframes floatSticker {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .sticker-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .message-bubble {
      position: relative;
      z-index: 2;
      padding: 10px 20px;
  margin-top: 0px; /* bisa diubah kalau masih kejauhan */
  z-index: 2;
    }
    
    .message-bubble p {
      margin: 0;
      line-height: 1.6;
      font-size: 1.2rem;
    }
    
    .message-time {
      font-size: 0.8rem;
      color: var(--accent-color);
      text-align: right;
      margin-top: auto;
      padding-top: 10px;
      position: relative;
      z-index: 2;
    }
    
    /* Navigation button */
    .nav-button {
      display: inline-block;
      background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 12px 25px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      box-shadow: 0 5px 15px rgba(255, 107, 139, 0.4);
      transition: all 0.3s;
      border: none;
      cursor: pointer;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease 0.5s;
      margin-top: 20px;
      position: relative;
      overflow: hidden;
    }
    
    .nav-button::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -60%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.3) 50%,
        rgba(255, 255, 255, 0) 100%
      );
      transform: rotate(30deg);
      transition: all 0.5s;
    }
    
    .nav-button:hover::after {
      left: 100%;
    }
    
    .nav-button.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .nav-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255, 107, 139, 0.6);
    }
    
    /* Interactive section */
    #interactive-section {
      text-align: center;
      margin-top: 30px;
    }
    
    .love-container {
      margin-bottom: 20px;
      position: relative;
    }
    
    .lovein {
      cursor: pointer;
      transition: transform 0.3s;
      display: inline-block;
      position: relative;
    }
    
    .lovein:hover {
      transform: scale(1.1);
    }
    
    .lovein svg {
      width: 60px;
      height: 60px;
      transition: all 0.3s;
      filter: drop-shadow(0 0 5px rgba(255, 107, 139, 0.5));
    }
    
    #ket {
      color: var(--accent-color);
      font-size: 0.9rem;
      margin-top: 5px;
      min-height: 20px;
    }
    
    .progress-container {
      width: 100%;
      max-width: 300px;
      margin: 10px auto;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      height: 10px;
      overflow: hidden;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
    }
    
    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      transition: width 0.3s ease;
      border-radius: 10px;
      position: relative;
      overflow: hidden;
    }
    
    .progress-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        90deg,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,0.3) 50%,
        rgba(255,255,255,0) 100%
      );
      animation: shimmer 2s infinite;
    }
    
    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    
    .progress-text {
      font-size: 0.8rem;
      color: var(--accent-color);
      margin-top: 5px;
      font-weight: 600;
    }
    
    /* Special photo that appears at 100% */
    .special-photo {
      width: 100%;
      max-width: 300px;
      margin: 20px auto;
      border-radius: 15px;
      display: none;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      border: 3px solid var(--primary-color);
      animation: pulse 2s infinite;
    }
    
    /* Footer */
    .footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 184, 198, 0.2);
      color: var(--accent-color);
      font-size: 0.9rem;
    }
    
    .footer-links {
      margin-top: 10px;
    }
    
    .footer-links a {
      color: var(--accent-color);
      margin: 0 10px;
      font-size: 1.2rem;
      transition: color 0.3s;
    }
    
    .footer-links a:hover {
      color: var(--primary-color);
      transform: translateY(-3px);
    }
    
    /* Floating hearts background */
    .floating-hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .message-header h1 {
        font-size: 2rem;
      }
      
      .message-card {
        padding: 15px;
      }
      
      .message-container {
        height: 350px;
      }
      
      .message-bubble p {
        font-size: 1rem;
      }
      
      .sticker-container {
        width: 50px;
        height: 50px;
      }
      
      .nav-button {
        padding: 10px 20px;
        font-size: 0.9rem;
      }
      
      .lovein svg {
        width: 50px;
        height: 50px;
      }
    }
    
    @media (max-width: 480px) {
      .message-header h1 {
        font-size: 1.8rem;
      }
      
      .message-container {
        height: 300px;
      }
      
      .message-bubble p {
        font-size: 0.9rem;
      }
      
      #ket {
        font-size: 0.8rem;
      }
    }
    @keyframes zoomBackground {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
    }
  </style>
</head>
<body>
   
   <!-- Audio Section -->
   <audio src="https://feeldreams.github.io/audio/thousand.mp3" id="bgMusic" loop></audio>
   <audio src="https://feeldreams.github.io/audio/notification.mp3" id="notifSound"></audio>
   <audio src="https://feeldreams.github.io/audio/heartbeat.mp3" id="heartbeatSound"></audio>
   <audio src="https://feeldreams.github.io/audio/pop.mp3" id="popSound"></audio>
   
   <!-- Background Elements -->
   <div id="starryBackground"></div>
   <div class="floating-hearts" id="floatingHearts"></div>
   
   <!-- Loading Screen -->
   <div class="overlay">
     <div class="heart-loader"></div>
     <div class="loading-text">Preparing something special for My honeyy...</div>
   </div>
   
   <!-- Main Content -->
   <div id='Content'>
     <!-- Animated Header -->
     <div class="message-header">
       <h1>For My Honeyy <span class="pulse">üíñ</span></h1>
     </div>
     
     <!-- Message Container with Horizontal Scroll -->
     <div class="message-container">
       <div class="message-scroll" id="messageScroll">
         <!-- Message 1 -->
         <div class="message-card" data-index="1">
           <div class="sticker-container">
             <img src="https://feeldreams.github.io/pusn.gif" alt="Sticker">
           </div>
           <div class="message-bubble">
             <p><b>
               <span>hiii Sayangg kuu, <br>aku cuma mau bilang<br>makasih yaa.. ü´†</span>
             </b></p>
           </div>
           <div class="message-time" id="messageTime1"></div>
         </div>

         <!-- Message 2 -->
         <div class="message-card" data-index="2">
           <div class="sticker-container">
             <img src="https://feeldreams.github.io/bunga.gif" alt="Sticker">
           </div>
           <div class="message-bubble">
             <p><b>
               <span>makasii udah sayang<br>sama akuu ü´∂</span>
             </b></p>
           </div>
           <div class="message-time" id="messageTime2"></div>
         </div>

         <!-- Message 3 -->
         <div class="message-card" data-index="3">
           <div class="sticker-container">
             <img src="https://feeldreams.github.io/ngumpet.gif" alt="Sticker">
           </div>
           <div class="message-bubble">
             <p><b>
               <span>makasih juga udah hadir<br>dalam hidup akuu üíó</span>
             </b></p>
           </div>
           <div class="message-time" id="messageTime3"></div>
         </div>

         <!-- Message 4 -->
         <div class="message-card" data-index="4">
           <div class="sticker-container">
             <img src="https://feeldreams.github.io/gumush.gif" alt="Sticker">
           </div>
           <div class="message-bubble">
             <p><b>
               <span>maaf kalo aku sering<br>bikin kamu kesel :(</span>
             </b></p>
           </div>
           <div class="message-time" id="messageTime4"></div>
         </div>

         <!-- Message 5 -->
         <div class="message-card" data-index="5">
           <div class="sticker-container">
             <img src="https://feeldreams.github.io/pusn.gif" alt="Sticker">
           </div>
           <div class="message-bubble">
             <p><b>
               <span>tapi jujur, aku tulus banget<br>kok sama kamu, hehe ü§ç</span>
             </b></p>
           </div>
           <div class="message-time" id="messageTime5"></div>
         </div>

         <!-- Final Message -->
         <div class="message-card" data-index="6">
           <div class="sticker-container">
             <img src="https://feeldreams.github.io/mmua.gif" alt="Sticker">
           </div>
           <div class="message-bubble">
             <p><b>
               <span id="ngetik">tetaplah menjadi semangatku,<br>jangan menjauh, jangan pergi, dan<br>jangan berpindah ke lain hati ya hehehe üòÖ<br>kamu milik ku, dan aku milik muu üíï<br>aku sayang kamuu,<br><br><i>i love u more üíó</i></span>
             </b></p>
           </div>
           <div class="message-time" id="messageTime6"></div>
         </div>
       </div>
     </div>
      
     <!-- Navigation Button -->
     <div id="Tombol" style="text-align: center;">
       <button onClick="nextMessage()" class="nav-button" id="nextButton">
         <b>Next Message <i class="fas fa-arrow-right"></i></b>
       </button>
     </div>
     
     <!-- Interactive Elements -->
     <div id="interactive-section">
       <div class="love-container">
         <label class='lovein'>
           <svg class='line' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>
             <g transform='translate(2.550170, 3.550158)'>
               <path d='M0.371729633,8.89614246 C-0.701270367,5.54614246 0.553729633,1.38114246 4.07072963,0.249142462 C5.92072963,-0.347857538 8.20372963,0.150142462 9.50072963,1.93914246 C10.7237296,0.0841424625 13.0727296,-0.343857538 14.9207296,0.249142462 C18.4367296,1.38114246 19.6987296,5.54614246 18.6267296,8.89614246 C16.9567296,14.2061425 11.1297296,16.9721425 9.50072963,16.9721425 C7.87272963,16.9721425 2.09772963,14.2681425 0.371729633,8.89614246 Z'></path>
               <path d='M13.23843,4.013842 C14.44543,4.137842 15.20043,5.094842 15.15543,6.435842'></path>
             </g>
           </svg>
         </label>
         <p id="ket">Touch the heart!</p>
         <div class="progress-container">
           <div class="progress-bar" id="progressBar"></div>
         </div>
         <div class="progress-text" id="progressText">0%</div>
       </div>
       
       <!-- Special photo that appears at 100% -->
       <img src="Beige Simple Frame Nature Photo Collage (1920 x 3415 px) (4 x 5 cm).jpg" class="special-photo" id="specialPhoto">
     </div>
     
     <!-- Footer -->
     <div class="footer">
       <p>Created with <i class="fas fa-heart"></i> by Amor</p>
       <p class="footer-links">
         <a href="https://github.com/feeldreams" target="_blank"><i class="fab fa-github"></i></a>
       </p>
     </div>
   </div>

<script>
// Configuration
const config = {
  heartMessages: [
    "Touch the heart!",
    "You're amazing Sayanggg! üíñ",
    "Keep going! üòä",
    "Almost there! üåü",
    "You're doing great! ü•∞",
    "Just a bit more! üí™",
    "Wow, you're persistent! üòç",
    "Incredible! üåà",
    "Almost at 100%! üöÄ",
    "You did it! 100% LOVE! üíØ"
  ],
  heartColors: [
    "#ff6b8b", "#ff8e53", "#ffb8c6", 
    "#ff4757", "#ff6348", "#ff7f50",
    "#ffa502", "#eccc68", "#7bed9f",
    "#70a1ff"
  ],
  stickers: [
    "https://feeldreams.github.io/pusn.gif",
    "https://feeldreams.github.io/bunga.gif",
    "https://feeldreams.github.io/ngumpet.gif",
    "https://feeldreams.github.io/gumush.gif",
    "https://feeldreams.github.io/pusn.gif",
    "https://feeldreams.github.io/mmua.gif"
  ],
  specialPhotoUrl: "https://feeldreams.github.io/pics/heartphoto.jpg"
};

// DOM elements
const body = document.querySelector("body");
const content = document.getElementById("Content");
const overlay = document.querySelector(".overlay");
const loveButton = document.querySelector(".lovein");
const heartSvg = document.querySelector(".lovein svg");
const ketText = document.getElementById("ket");
const progressBar = document.getElementById("progressBar");
const progressText = document.getElementById("progressText");
const specialPhoto = document.getElementById("specialPhoto");
const bgMusic = document.getElementById("bgMusic");
const notifSound = document.getElementById("notifSound");
const heartbeatSound = document.getElementById("heartbeatSound");
const popSound = document.getElementById("popSound");
const messageScroll = document.getElementById("messageScroll");
const nextButton = document.getElementById("nextButton");
const messageTimes = [
  document.getElementById("messageTime1"),
  document.getElementById("messageTime2"),
  document.getElementById("messageTime3"),
  document.getElementById("messageTime4"),
  document.getElementById("messageTime5"),
  document.getElementById("messageTime6")
];
const floatingHearts = document.getElementById("floatingHearts");

// State variables
let clickCount = 0;
let progress = 0;
let currentMessage = 0;
const maxClicks = 10; // 10 clicks to reach 100% (10% per click)
const totalMessages = 6;
let typingComplete = false;
let typeitInstance = null;

// Create starry background with animation
function createStars() {
  const container = document.getElementById('starryBackground');
  for (let i = 0; i < 150; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.width = (Math.random() * 3 + 1) + 'px';
    star.style.height = star.style.width;
    star.style.left = Math.random() * 100 + 'vw';
    star.style.top = Math.random() * 100 + 'vh';
    star.style.animationDelay = Math.random() * 5 + 's';
    star.style.animationDuration = (Math.random() * 3 + 2) + 's';
    container.appendChild(star);
  }
}

// Create floating hearts background
function createFloatingHearts() {
  for (let i = 0; i < 15; i++) {
    const heart = document.createElement('div');
    heart.className = 'floating-heart';
    heart.innerHTML = '‚Ä¢Ô∏è';
    heart.style.left = Math.random() * 100 + 'vw';
    heart.style.animationDelay = Math.random() * 15 + 's';
    heart.style.animationDuration = (Math.random() * 1 + 10) + 's';
    heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
    heart.style.color = config.heartColors[Math.floor(Math.random() * config.heartColors.length)];
    floatingHearts.appendChild(heart);
  }
}

// Initialize typing effect
function initTypeIt() {
  typeitInstance = new TypeIt('#ngetik', {
    speed: 50,
    waitUntilVisible: true,
    lifeLike: true,
    cursor: false,
    afterComplete: function() {
      typingComplete = true;
      // Show next button when typing is complete
      if (currentMessage === totalMessages - 1) {
        nextButton.textContent = "That's all for now!";
        nextButton.disabled = true;
        nextButton.classList.add('visible');
      }
    }
  }).go();
}

// Update progress bar and text
function updateProgress() {
  progress = (clickCount / maxClicks) * 100;
  progressBar.style.width = progress + '%';
  progressText.textContent = Math.round(progress) + '%';
  
  // Show special photo at 100%
  if (progress >= 100) {
    specialPhoto.style.display = 'block';
    gsap.from(specialPhoto, {
      scale: 0.8,
      opacity: 0,
      duration: 1,
      ease: "back.out(1.7)"
    });
    heartbeatSound.currentTime = 0;
    heartbeatSound.play();
    
    // Create heart explosion
    createHeartExplosion(30, config.heartColors[Math.floor(Math.random() * config.heartColors.length)]);
  }
}

// Heart click interaction
function setupHeartInteraction() {
  loveButton.addEventListener('click', function() {
    notifSound.currentTime = 0;
    notifSound.play();
    clickCount = Math.min(clickCount + 1, maxClicks);
    
    // Update heart color based on progress
    const colorIndex = Math.min(Math.floor(clickCount / (maxClicks / config.heartColors.length)), config.heartColors.length - 1);
    heartSvg.style.fill = config.heartColors[colorIndex];
    heartSvg.style.filter = `drop-shadow(0 0 10px ${config.heartColors[colorIndex]})`;
    
    // Update text based on progress
    const messageIndex = Math.min(clickCount - 1, config.heartMessages.length - 1);
    ketText.textContent = config.heartMessages[messageIndex];
    
    // Create mini heart explosion
    createHeartExplosion(10, config.heartColors[colorIndex]);
    
    // Update progress
    updateProgress();
    
    // Add pulse animation to heart
    gsap.to(heartSvg, {
      scale: 1.2,
      duration: 0.2,
      yoyo: true,
      repeat: 1,
      ease: "power1.inOut"
    });
  });
}

// Create heart explosion effect
function createHeartExplosion(count, color) {
  const rect = loveButton.getBoundingClientRect();
  const x = rect.left + rect.width / 2;
  const y = rect.top + rect.height / 2;
  
  for (let i = 0; i < count; i++) {
    const heart = document.createElement('div');
    heart.innerHTML = '‚Ä¢';
    heart.style.position = 'fixed';
    heart.style.left = x + 'px';
    heart.style.top = y + 'px';
    heart.style.fontSize = '20px';
    heart.style.opacity = '0';
    heart.style.transform = 'translate(-50%, -50%)';
    heart.style.color = color || config.heartColors[0];
    heart.style.zIndex = '999';
    heart.style.pointerEvents = 'none';
    document.body.appendChild(heart);
    
    gsap.to(heart, {
      x: (Math.random() - 0.5) * 100,
      y: (Math.random() - 0.5) * 100 - 50,
      opacity: 1,
      fontSize: '15px',
      duration: 0.5,
      ease: 'power1.out'
    });
    
    gsap.to(heart, {
      y: '-=50',
      opacity: 0,
      duration: 1,
      delay: 0.5,
      ease: 'power1.in',
      onComplete: () => heart.remove()
    });
  }
}

// Set real-time dates for messages
function setMessageTimes() {
  const now = new Date();
  const options = { hour: '2-digit', minute: '2-digit', month: 'short', day: 'numeric' };
  
  messageTimes.forEach((element, index) => {
    const messageTime = new Date(now);
    messageTime.setMinutes(now.getMinutes() - (messageTimes.length - index - 1));
    element.textContent = messageTime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }) + 
                         ' ‚Ä¢ ' + messageTime.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
  });
}

// Show next message with horizontal slide
function nextMessage() {
  if (currentMessage >= totalMessages - 1) return;
  
  popSound.currentTime = 0;
  popSound.play();
  currentMessage++;
  const scrollPosition = -currentMessage * (messageScroll.children[0].offsetWidth + 20);
  
  gsap.to(messageScroll, {
    x: scrollPosition,
    duration: 0.5,
    ease: "back.out(1.2)"
  });
  
  // Hide button temporarily during transition
  nextButton.classList.remove('visible');
  
  // Show button again after 1 second
  setTimeout(() => {
    if (currentMessage < totalMessages - 1) {
      nextButton.classList.add('visible');
    } else {
      // For the last message, we'll show the button when typing is complete
      if (typingComplete) {
        nextButton.textContent = "That's all for now!";
        nextButton.disabled = true;
      }
    }
  }, 1000);
  
  // Animate the new message card
  gsap.from(`.message-card[data-index="${currentMessage + 1}"]`, {
    x: 100,
    opacity: 0,
    duration: 0.8,
    delay: 0.3,
    ease: "back.out(1.2)"
  });
  
  // Initialize typing effect for the last message
  if (currentMessage === totalMessages - 1) {
    // Destroy previous instance if exists
    if (typeitInstance) {
      typeitInstance.destroy();
    }
    initTypeIt();
  }
}

// Initialize everything when DOM loads
document.addEventListener('DOMContentLoaded', function() {
  createStars();
  createFloatingHearts();
  setMessageTimes();
  setupHeartInteraction();
  
  // Hide loading screen after 2 seconds
  setTimeout(() => {
    overlay.style.opacity = 0;
    setTimeout(() => {
      overlay.style.display = 'none';
      content.classList.add('content-loaded');
      
      // Start background music with low volume
      bgMusic.volume = 0.3;
      // Try to play music (might be blocked by browser autoplay policies)
      const playPromise = bgMusic.play();
      
      if (playPromise !== undefined) {
        playPromise.catch(error => {
          // Autoplay was prevented, show a button to allow playback
          console.log("Autoplay prevented:", error);
          const playButton = document.createElement('button');
          playButton.textContent = 'Play Music';
          playButton.className = 'nav-button visible';
          playButton.style.marginTop = '20px';
          playButton.style.display = 'block';
          playButton.style.marginLeft = 'auto';
          playButton.style.marginRight = 'auto';
          playButton.addEventListener('click', () => {
            bgMusic.play();
            playButton.remove();
          });
          document.getElementById('Tombol').appendChild(playButton);
        });
      }
      
      // Show first message with animation
      gsap.from(".message-card[data-index='1']", {
        x: 100,
        opacity: 0,
        duration: 1,
        delay: 0.5,
        ease: "back.out(1.2)"
      });
      
      // Show next button after delay
      setTimeout(() => {
        nextButton.classList.add('visible');
      }, 1500);
      
      // Initialize typing effect for the last message when it becomes visible
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && entry.target.dataset.index === "6") {
            initTypeIt();
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      
      observer.observe(document.querySelector('.message-card[data-index="6"]'));
    }, 1000);
  }, 2000);
});

// Show sweet alert when trying to leave the page
window.addEventListener('beforeunload', function(e) {
  e.preventDefault();
  e.returnValue = 'Are you sure you want to leave this special message?';
});
</script>
</body>
</html>
